<!DOCTYPE module SYSTEM "module.dtd">
<module name="encoder_amt22" dir="sensors" task="sensors">
  <doc>
    <description>Driver for AMT22 encoder from CUI devices.</description>
    
  </doc>

   <settings>
    <dl_settings>
      <dl_settings name="encoder_amt22">
        <dl_setting min="0." max="10." step="0.01" var="encoder_amt22.H_g_filter.alpha[0]" module="sensors/encoder_amt22" shortname="alpha0" handler="update_alpha0"/>
        <dl_setting min="0." max="10." step="0.01" var="encoder_amt22.H_g_filter.alpha[1]" module="sensors/encoder_amt22" shortname="alpha1" handler="update_alpha1"/>
        <dl_setting min="0." max="10." step="0.01" var="encoder_amt22.H_g_filter.alpha[2]" module="sensors/encoder_amt22" shortname="alpha2" handler="update_alpha2"/>
        <dl_setting min="0." max="10." step="0.01" var="encoder_amt22.H_g_filter.epsilon" module="sensors/encoder_amt22" shortname="epsilon" handler="update_epsilon"/>     
      </dl_settings>
    </dl_settings>
  </settings>

  <dep>
    <depends>spi_master</depends>
  </dep>

  <header>
    <file name="encoder_amt22.h"/>
  </header>

  <init fun="encoder_amt22_init()"/>
  <periodic fun="encoder_amt22_periodic()" autorun="TRUE"/>
  <periodic fun="encoder_amt22_report()" freq="5.0" autorun="FALSE"/> <!--FALSE -->
  <event fun="encoder_amt22_event()"/>

  <makefile>
    <configure name="AMT22_SPI_DEV" default="SPI2" case="upper|lower"/>
    <configure name="AMT22_SPI_SLAVE_IDX" default="SPI_SLAVE0"/>
    <define name="USE_$(AMT22_SPI_DEV_UPPER)"/>
    <define name="USE_$(AMT22_SPI_SLAVE_IDX)"/>
    <define name="AMT22_SPI_DEV" value="$(AMT22_SPI_DEV_LOWER)"/>
    <define name="AMT22_SPI_SLAVE_IDX" value="$(AMT22_SPI_SLAVE_IDX)"/>
    <file name="encoder_amt22.c"/>
    <file name="amt22.c" dir="peripherals"/>
    <file name="high_gain_filter.c" dir="filters"/>
    <test/>
  </makefile>

</module>
